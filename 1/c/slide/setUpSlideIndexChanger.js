import{ANIMATION_TIME}from"../../cn/css-constants";import{FADE_IN_CLASS_NAME,FADE_OUT_CLASS_NAME}from"../../cn/classes-names";import{removeFromElementClassIfContains}from"../../h/elements/removeFromElementClassIfContains";export function setUpSlideIndexChanger({componentsServices,core:{slideIndexChanger:self,sourceDisplayFacade},isl,saw,smwm,st,stageIndexes,sws}){self.changeTo =(i)=>{stageIndexes.current=i;st.u();componentsServices.setSlideNumber(i+1);sourceDisplayFacade.displaySourcesWhichShouldBeDisplayed();};self.jumpTo=(i)=>{var opi=stageIndexes.previous,oi=stageIndexes.current,oni=stageIndexes.next,ipl=isl[oi],icl=isl[i];self.changeTo(i);for(var j=0;j<smwm.length;j++){smwm[j].d();}sws.d(oi);sws.c();requestAnimationFrame(function(){requestAnimationFrame(function(){var pi=stageIndexes.previous,ci=stageIndexes.current,ni=stageIndexes.next;if(ipl){saw[oi].current.classList.add(FADE_OUT_CLASS_NAME);}if(icl){saw[ci].current.classList.add(FADE_IN_CLASS_NAME);}sws.a();if(pi!==undefined&&pi!==oi){smwm[pi].ne();}smwm[ci].n();if(ni!==undefined&&ni!==oi){smwm[ni].p();}sws.b(opi);sws.b(oni);if(isl[oi]){setTimeout(hoss,ANIMATION_TIME-40);}else{hoss();}function hoss(){if(!st.i(oi)){smwm[oi].h();smwm[oi].n();}else if(oi===stageIndexes.previous){smwm[oi].ne();}else if(oi===stageIndexes.next){smwm[oi].p();}}});});};}
// In the "jumpTo" method, the checking whether the source is loaded was done before reflow because if a source would load after a slide change but before a reflow, inexpected animation may be addedâ€”in the case of a current source, the slide change animation would be added instead of the initial animation after a load.
